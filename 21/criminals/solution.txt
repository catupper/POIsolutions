まず、2人が住む家の色を決める。そして、そこから出発して与えられて通りの色の家をたどって候補を数え上げる。
このとき、考えられる範囲は連続的な区間になる。つまり区間の両端さえわかればよい。これはBitkaがたどり着きうる家の中で最もインデックスが小さい家と、Bajtkaがたどり着きうる家の中で最もインデックスが大きい家である。
これらは貪欲的に探索することによって求めることができる。よってこの解放でO(N^2)でもとまる。

Bitkaが住む家のインデックスを小さい順に走査すると、Bitkaが強盗に入る家のインデックスは全て単調非減少に変化する。Bitkaは同じ色の家には二度以上入らないので、家を色ごとに分けてインデックスを管理しておけば、しゃくとり的に家のインデックスを更新することで合わせてO(N)で走査ができる。
Bajtkaも同様である。これで満点が得られる。